package com.scb.axessspringboottraining.controller;

import com.scb.axessspringboottraining.entities.AdminLogin;
import com.scb.axessspringboottraining.service.AdminProfileService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

@RestController
@RequestMapping("/api/admin/profile")
@CrossOrigin("*") // React frontend
public class AdminProfileController {

    @Autowired
    private AdminProfileService adminProfileService;

    // ✅ Get admin profile by email
    @GetMapping("/{email}")
    public ResponseEntity<AdminLogin> getProfile(@PathVariable String email) {
        System.out.println("Fetching profile for email: " + email);
        return ResponseEntity.ok(adminProfileService.getAdminProfile(email));
    }

    // ✅ Update admin profile
    @PutMapping("/{email}")
    public ResponseEntity<AdminLogin> updateProfile(
            @PathVariable String email,
            @RequestBody AdminLogin updatedProfile) {

        System.out.println("Updating profile for email: " + email);
        System.out.println("New details: " + updatedProfile);

        return ResponseEntity.ok(adminProfileService.updateAdminProfile(email, updatedProfile));
    }
}
