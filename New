const handleSubmit = async (e) => {
  e.preventDefault();
  try {
    const res = await axios.post("http://localhost:8080/api/users/userlogin", formData);
    console.log("Login response:", res.data);

    // case 1: backend returns plain string
    if (typeof res.data === "string") {
      setMessage(res.data);

      if (res.data.toLowerCase().includes("login successful")) {
        navigate("/UserDashboard");
      }

    } else if (res.data && res.data.email) {
      // case 2: backend returns JSON object
      localStorage.setItem("user", JSON.stringify(res.data));  // store entire user object
      localStorage.setItem("email", res.data.email);           // also store only email separately if needed
      setMessage("Login successful!");
      navigate("/UserDashboard");
    } else {
      setMessage("Invalid login credentials");
    }

  } catch (err) {
    console.error(err);
    setMessage("Server error. Please try again.");
  }
};
